{% extends 'base.html.twig' %}

{% block title %}Available Exams{% endblock %}
{% block javascripts %}
  {% block importmap %}{{ importmap('student') }}{% endblock %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      var time = $(".timer").text();
      $(".timer").text(time+":00"+":00 time left");
      var seconds = 0;
      var minutes = 0;
      var hours = parseInt(time);
      var timer = setInterval(() => {
        if(hours == 0 && minutes == 0 && seconds == 0){
          clearInterval(timer);
          console.log("end");
          $(".exam-form").trigger("submit");
        }
        if(seconds<=0 && hours!=0){
          minutes--;
          seconds = 59;
        }
        if(minutes<=0 && hours!=0){
          hours=0;
          minutes = 0;
          seconds = 20;
        }

        $(".timer").text(hours+":"+minutes+":"+seconds+" time left");
        seconds--;
      },1000)
    });
  </script>
{% endblock %}
{% block stylesheets %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% endblock %}
{% block body %}

<div class="container">
  <h3>Questions</h3>
  <div class="timer">{{duration}}</div>
  <form action="/student/examSubmit/{{examNumber}}" class="exam-form" method="post">
    {% for question in ques %}
    <div class="question">
      <div>{{question.question}}</div>
      <div class="choose-answer">
        <input class="form-check-input" type="radio" name="{{question.id}}" id="option1" value="{{question.option1}}">
        <label for="option1">{{question.option1}}</label><br>
      </div>
      <div class="choose-answer">
        <input class="form-check-input" type="radio" name="{{question.id}}" id="option2" value="{{question.option2}}">
        <label for="option2">{{question.option2}}</label><br>
      </div>
      <div class="choose-answer">
        <input class="form-check-input" type="radio" name="{{question.id}}" id="option3" value="{{question.option3}}">
        <label for="option1">{{question.option3}}</label><br>
      </div>
    </div>
    {% endfor %}
    <input type="submit" name="exam-submit" value="Submit Exam" class="btn btn-primary">
  </form>
</div>
{% endblock %}
